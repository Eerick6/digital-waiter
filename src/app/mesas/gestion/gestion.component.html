<div class="head-mesas">
    <div class="title">
        <h1>Mesa Seleccionada</h1>
        <h3>Añade Productos a tu orden</h3>
    </div>
    <div class="btones">
        <div class="btn" (click)="mostrarModal = true">Enviar Orden</div>
    </div>
</div>

<div class="detalles">
    <div class="n-orden">
        <h4>Número de mesa:</h4>
        <input type="text" [(ngModel)]="numeroMesa">
    </div>
    <div class="n-orden">
        <h4>Cliente:</h4>
        <input type="text" [(ngModel)]="nombreCliente">
    </div>
    <div class="n-orden">
        <h4>Número de orden:</h4>
        <input type="text" [(ngModel)]="numeroOrden">
    </div>
</div>

<div class="detalle-container">
    
    <!-- Tabla de productos donde se manejan las cantidades -->
<table class="tabla-pedido">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Precio</th>
        <th>Cantidad</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let product of pedido">
        <td>{{ product.name }}</td>
        <td>{{ product.price }}</td>
        <td>
          <input 
            type="number" 
            [(ngModel)]="cantidades[product.id]" 
            (input)="calcularTotal()" 
            min="0" 
            placeholder="0">
        </td>
      </tr>
    </tbody>
    <h3>Total: ${{ totalFactura.toFixed(2) }}</h3>
  </table>
  
  <!-- Mostrar el total de la factura -->

  

    
    

    <div class="plato">
        <div class="postres">
            <h2>Postres</h2>

            <table class="tabla-platos">
        
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Descripción</th>
                        <th>Precio</th>
                        
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let product of pedido">
                        <td>{{ product.name }}</td>
                        <td>{{product.description}}</td>
                        <td>{{ product.price }}</td>
                        
                    </tr>
                </tbody>
            </table>

        </div>
        <div class="entradas">

            <h2>Entradas</h2>
            <table class="tabla-platos">
                
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Descripción</th>
                        <th>Precio</th>
                        
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let product of pedido">
                        <td>{{ product.name }}</td>
                        <td>{{product.description}}</td>
                        <td>{{ product.price }}</td>
                        
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>


<!-- Modal de confirmación -->
<div class="modal-overlay" *ngIf="mostrarModal" (click)="closeModal($event)">
    <div class="modal-content">
      <h2>Confirmar Orden</h2>
      <div class="modal-info">
        <p><strong>Número de mesa:</strong> {{ numeroMesa }}</p>
        <p><strong>Cliente:</strong> {{ nombreCliente }}</p>
        <p><strong>Número de orden:</strong> {{ numeroOrden }}</p>
        <p><strong>Total:</strong> ${{ totalFactura.toFixed(2) }}</p>
      </div>
      <div class="modal-buttons">
        <button class="btn cancelar" (click)="mostrarModal = false">Cancelar</button>
        <button class="btn confirmar" (click)="enviarOrden()">Confirmar</button>
      </div>
    </div>
  </div>